$(function(){$.ajaxSetup({success:function(d){if(d.redirect){$.get(d.redirect)}if(d.snippets){for(var c in d.snippets){jQuery.nette.updateSnippet(c,d.snippets[c])}hideSpinner()}}});$(".grid-flash-hide").live("click",function(){$(this).parent().parent().fadeOut(300)});$(".grid-select-all").live("click",function(){var c=$(this).parents("thead").siblings("tbody").children("tr:not(.grid-subgrid-row)").find("td input:checkbox.grid-action-checkbox");if($(this).is(":checked")){$(c).attr("checked","checked")}else{$(c).removeAttr("checked")}});$(".grid a.grid-ajax:not(.grid-confirm)").live("click",function(c){c.preventDefault();$.get(this.href);callSpinner()});$(".grid a.grid-confirm:not(.grid-ajax)").live("click",function(c){var d=confirm($(this).data("grid-confirm"));return d});$(".grid a.grid-confirm.grid-ajax").live("click",function(c){c.preventDefault();var d=confirm($(this).data("grid-confirm"));if(d){$.get(this.href);callSpinner()}});$(".grid-gridForm").find("input[type=submit]").live("click",function(){$(this).addClass("grid-gridForm-clickedSubmit")});$(".grid-gridForm").live("submit",function(f){var d=$(".grid-gridForm-clickedSubmit");$(d).removeClass("grid-gridForm-clickedSubmit");if($(d).data("select")){var c=$(d).data("select");var e=$('select[name="'+c+'"] option:selected');if($(e).data("grid-confirm")){var g=confirm($(e).data("grid-confirm"));if(g){if($(e).hasClass("grid-ajax")){f.preventDefault();$.post(this.action,$(this).serialize()+"&"+$(d).attr("name")+"="+$(d).val());callSpinner()}}else{return false}}else{if($(e).hasClass("grid-ajax")){f.preventDefault();$.post(this.action,$(this).serialize()+"&"+$(d).attr("name")+"="+$(d).val());callSpinner()}}}else{f.preventDefault();$.post(this.action,$(this).serialize()+"&"+$(d).attr("name")+"="+$(d).val());callSpinner()}});$(".grid-autocomplete").live("keydown.autocomplete",function(){var c=$(this).data("gridname");var d=$(this).data("column");var e=$(this).data("link");$(this).autocomplete({source:function(g,f){$.ajax({url:e,data:c+"-term="+g.term+"&"+c+"-column="+d,dataType:"json",method:"post",success:function(h){f(h.payload)}})},delay:100,open:function(){$(".ui-menu").width($(this).width())}})});$(".grid-changeperpage").live("change",function(){$.get($(this).data("link"),$(this).data("gridname")+"-perPage="+$(this).val());callSpinner()});function b(){$(".grid-perpagesubmit").hide()}b();function a(){if(!$.datepicker){return}$(".grid-datepicker").each(function(){if(($(this).val()!="")){var c=$.datepicker.formatDate("yy-mm-dd",new Date($(this).val()))}$(this).datepicker();$(this).datepicker({constrainInput:false})})}a();$(this).ajaxStop(function(){a();b()});$("input.grid-editable").live("keypress",function(c){if(c.keyCode=="13"){c.preventDefault();$("input[type=submit].grid-editable").click()}});$("table.grid tbody tr:not(.grid-subgrid-row) td.grid-data-cell").live("dblclick",function(c){$(this).parent().find("a.grid-editable:first").click()})});function callSpinner(){$(".grid-spinner").show().css({position:"absolute",left:event.pageX-20,top:event.pageY-20})}function hideSpinner(){$(".grid-spinner").hide()};