var LiveForm={options:{controlErrorClass:"form-control-error",errorMessageClass:"form-error-message",validMessageClass:"form-valid-message",noLiveValidation:"no-live-validation",showValid:false,dontShowWhenValidClass:"dont-show-when-valid",messageTag:"span",messageIdPostfix:"_message",wait:300},forms:{}};LiveForm.setUpHandlers=function(c){if(this.hasClass(c,this.options.noLiveValidation)){return}var b=function(d){d=d||window.event;Nette.validateControl(d.target?d.target:d.srcElement)};var a=this;c.onchange=b;c.onblur=b;c.onkeydown=function(e){if(a.options.wait>=200){a.removeClass(this,a.options.controlErrorClass);a.removeClass(this,a.options.validMessageClass);var d=a.getMessageElement(this);d.innerHTML="";d.className="";if(a.timeout){clearTimeout(a.timeout)}}};c.onkeyup=function(d){d=d||window.event;if(d.keyCode!==9){if(a.timeout){clearTimeout(a.timeout)}a.timeout=setTimeout(function(){b(d)},a.options.wait)}}};LiveForm.addError=function(b,c){this.forms[b.form.id].hasError=true;this.addClass(b,this.options.controlErrorClass);if(!c){c="&nbsp;"}var a=this.getMessageElement(b);a.innerHTML=c};LiveForm.removeError=function(b){this.removeClass(b,this.options.controlErrorClass);var a=document.getElementById(b.id+this.options.messageIdPostfix);if(this.options.showValid&&this.showValid(b)){a=this.getMessageElement(b);a.className=this.options.validMessageClass;return}if(a){a.parentNode.removeChild(a)}};LiveForm.showValid=function(b){if(b.type){var a=b.type.toLowerCase();if(a=="checkbox"||a=="radio"){return false}}var c=Nette.getRules(null,b);if(c.length==0){return false}if(this.hasClass(b,this.options.dontShowWhenValidClass)){return false}return true};LiveForm.getMessageElement=function(b){var c=b.id+this.options.messageIdPostfix;var a=document.getElementById(c);if(!a){a=document.createElement(this.options.messageTag);a.id=c;b.parentNode.appendChild(a)}if(b.style.display=="none"){a.style.display="none"}a.className=this.options.errorMessageClass;a.innerHTML="";return a};LiveForm.addClass=function(b,a){if(!b.className){b.className=a}else{if(!this.hasClass(b,a)){b.className+=" "+a}}};LiveForm.hasClass=function(b,a){if(b.className){return b.className.match(new RegExp("(\\s|^)"+a+"(\\s|$)"))}return false};LiveForm.removeClass=function(d,c){if(this.hasClass(d,c)){var b=new RegExp("(\\s|^)"+c+"(\\s|$)");var a=d.className.match(b);d.className=d.className.replace(b,(a[1]==" "&&a[2]==" ")?" ":"")}};var Nette=Nette||{};Nette.addEvent=function(c,a,d){var b=c["on"+a];c["on"+a]=function(){if(typeof b==="function"&&b.apply(c,arguments)===false){return false}return d.apply(c,arguments)}};Nette.getValue=function(e){var d,a;if(!e){return null}else{if(!e.nodeName){for(d=0,a=e.length;d<a;d++){if(e[d].checked){return e[d].value}}return null}else{if(e.nodeName.toLowerCase()==="select"){var c=e.selectedIndex,b=e.options;if(c<0){return null}else{if(e.type==="select-one"){return b[c].value}}for(d=0,values=[],a=b.length;d<a;d++){if(b[d].selected){values.push(b[d].value)}}return values}else{if(e.type==="checkbox"){return e.checked}else{if(e.type==="radio"){return Nette.getValue(e.form.elements[e.name].nodeName?[e]:e.form.elements[e.name])}else{return e.value.replace(/^\s+|\s+$/g,"")}}}}}};Nette.validateControl=function(c,f,a){f=Nette.getRules(f,c);for(var h in f){var d=f[h],g=d.op.match(/(~)?([^?]+)/);d.neg=g[1];d.op=g[2];d.condition=!!d.rules;var b=d.control?c.form.elements[d.control]:c;var e=Nette.validateRule(b,d.op,d.arg);if(e===null){continue}if(d.neg){e=!e}if(d.condition&&e){if(!Nette.validateControl(c,d.rules,a)){return false}}else{if(!d.condition&&!e){if(b.disabled){continue}if(!a){Nette.addError(b,d.msg.replace("%value",Nette.getValue(b)))}return false}}}if(!a){LiveForm.removeError(c)}return true};Nette.getRules=function(rules,elem){return rules||eval("["+(elem.getAttribute("data-nette-rules")||"")+"]")};Nette.validateForm=function(c){var e=c.form||c;LiveForm.forms[e.id].hasError=false;if(e["nette-submittedBy"]&&e["nette-submittedBy"].getAttribute("formnovalidate")!==null){return true}var b=true;for(var a=0;a<e.elements.length;a++){var d=e.elements[a];if(!(d.nodeName.toLowerCase() in {input:1,select:1,textarea:1})||(d.type in {hidden:1,submit:1,image:1,reset:1})||d.disabled||d.readonly){continue}if(!Nette.validateControl(d)){b=false}}return b};Nette.addError=function(b,a){if(b.focus&&!LiveForm.forms[b.form.id].hasError){b.focus()}LiveForm.addError(b,a)};Nette.validateRule=function(b,d,a){var c=Nette.getValue(b);if(b.getAttribute){if(c===b.getAttribute("data-nette-empty-value")){c=""}}if(d.charAt(0)===":"){d=d.substr(1)}d=d.replace("::","_");d=d.replace(/\\/g,"");return Nette.validators[d]?Nette.validators[d](b,a,c):null};Nette.validators={filled:function(b,a,c){return c!==""&&c!==false&&c!==null},valid:function(b,a,c){return Nette.validateControl(b,null,true)},equal:function(d,b,e){if(b===undefined){return null}b=Nette.isArray(b)?b:[b];for(var c=0,a=b.length;c<a;c++){if(e==(b[c].control?Nette.getValue(d.form.elements[b[c].control]):b[c])){return true}}return false},minLength:function(b,a,c){return c.length>=a},maxLength:function(b,a,c){return c.length<=a},length:function(b,a,c){a=Nette.isArray(a)?a:[a,a];return(a[0]===null||c.length>=a[0])&&(a[1]===null||c.length<=a[1])},email:function(b,a,c){return(/^("([ !\x23-\x5B\x5D-\x7E]*|\\[ -~])+"|[-a-z0-9!#$%&'*+/=?^_`{|}~]+(\.[-a-z0-9!#$%&'*+/=?^_`{|}~]+)*)@([0-9a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,61}[0-9a-z\u00C0-\u02FF\u0370-\u1EFF])?\.)+[a-z\u00C0-\u02FF\u0370-\u1EFF][-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,17}[a-z\u00C0-\u02FF\u0370-\u1EFF]$/i).test(c)},url:function(b,a,c){return(/^(https?:\/\/|(?=.*\.))([0-9a-z\u00C0-\u02FF\u0370-\u1EFF](([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,61}[0-9a-z\u00C0-\u02FF\u0370-\u1EFF])?\.)*[a-z\u00C0-\u02FF\u0370-\u1EFF][-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,17}[a-z\u00C0-\u02FF\u0370-\u1EFF]|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(:\d{1,5})?(\/\S*)?$/i).test(c)},regexp:function(b,a,f){var d=typeof a==="string"?a.match(/^\/(.*)\/([imu]*)$/):false;if(d){try{return(new RegExp(d[1],d[2].replace("u",""))).test(f)}catch(c){}}},pattern:function(b,a,d){try{return typeof a==="string"?(new RegExp("^("+a+")$")).test(d):null}catch(c){}},integer:function(b,a,c){return(/^-?[0-9]+$/).test(c)},"float":function(b,a,c){return(/^-?[0-9]*[.,]?[0-9]+$/).test(c)},range:function(e,i,d){if($(e).hasClass("date")){var g=d.split(".");var h=null;if(g.length===3&&g[2].length===4&&g[1].length===2&&g[0].length===2){h=g[2]+"-"+g[1]+"-"+g[0]}var b=$.datepicker.W3C;var f=(h?$.datepicker.parseDate(b,h):null);var c=Nette.isArray(i)&&i[0]!==null?$.datepicker.parseDate(b,i[0].date):null;var a=Nette.isArray(i)&&i[1]!==null?$.datepicker.parseDate(b,i[1].date):null;return Nette.isArray(i)?((c===null||f>=c)&&(a===null||f<=a)):null}return Nette.isArray(i)?((i[0]===null||parseFloat(d)>=i[0])&&(i[1]===null||parseFloat(d)<=i[1])):null},submitted:function(b,a,c){return b.form["nette-submittedBy"]===b}};Nette.toggleForm=function(b){for(var a=0;a<b.elements.length;a++){if(b.elements[a].nodeName.toLowerCase() in {input:1,select:1,textarea:1,button:1}){Nette.toggleControl(b.elements[a])}}};Nette.toggleControl=function(c,m,g){m=Nette.getRules(m,c);var k=false,f=Object.prototype.hasOwnProperty,n=function(){Nette.toggleForm(c.form)};for(var a in m){var h=m[a],e=h.op.match(/(~)?([^?]+)/);h.neg=e[1];h.op=e[2];h.condition=!!h.rules;if(!h.condition){continue}var b=h.control?c.form.elements[h.control]:c;var l=Nette.validateRule(b,h.op,h.arg);if(l===null){continue}if(h.neg){l=!l}if(Nette.toggleControl(c,h.rules,g)||h.toggle){k=true;if(g){if(!b.nodeName){for(var d=0;d<b.length;d++){Nette.addEvent(b[d],"click",n)}}else{if(b.nodeName.toLowerCase()==="select"){Nette.addEvent(b,"change",n)}else{Nette.addEvent(b,"click",n)}}}for(var j in h.toggle||[]){if(f.call(h.toggle,j)){Nette.toggle(j,l?h.toggle[j]:!h.toggle[j])}}}}return k};Nette.toggle=function(c,b){var a=document.getElementById(c);if(a){a.style.display=b?"":"none"}};Nette.initForm=function(b){b.noValidate="novalidate";LiveForm.forms[b.id]={hasError:false};Nette.addEvent(b,"submit",function(){return Nette.validateForm(b)});Nette.addEvent(b,"click",function(g){g=g||event;var f=g.target||g.srcElement;b["nette-submittedBy"]=(f.type in {submit:1,image:1})?f:null});for(var a=0;a<b.elements.length;a++){Nette.toggleControl(b.elements[a],null,true);LiveForm.setUpHandlers(b.elements[a])}if(/MSIE/.exec(navigator.userAgent)){var e={},c=function(){return false},d=function(){document.getElementById(this.htmlFor).focus();return false};for(a=0,elms=b.getElementsByTagName("label");a<elms.length;a++){e[elms[a].htmlFor]=elms[a]}for(a=0,elms=b.getElementsByTagName("select");a<elms.length;a++){Nette.addEvent(elms[a],"mousewheel",c);if(e[elms[a].htmlId]){Nette.addEvent(e[elms[a].htmlId],"click",d)}}}};Nette.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"};$(document).ready(function(){$("form").livequery(function(){Nette.initForm(this)})});